<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Component Example</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="flex flex-col justify-center items-center h-screen">
    <script type="module" src="lib/main.ts" defer></script>
    <x-state
      value="{name: 'John', counter: 16, prop: {a: {test: 'test'}, b: 2}, array: [{label: 'a', value: 1}, {label: 'b', value: 2}, {label: 'c', value: 3}]}"
    >
      <div class="container h-screen flex flex-col gap-6">
        <x-component
          data-as="button"
          data-value="{$state.name}"
          onclick="{toggleName($state.name)}"
          class="{`text-2xl font-bold cursor-pointer text-center ${$state.name == 'John' ? 'text-red-500' : 'text-blue-500'}`}"
        >
          hola
        </x-component>

        <div class="flex flex-col gap-3 items-center text-xl">
          <x-var counter></x-var>
          <x-component
            data-show="{$state.counter >= 18}"
            class="text-sm text-center w-full"
          >
            <x-var prop.a.test></x-var> es mayor de edad
          </x-component>
          <div class="flex gap-2 justify-center">
            <x-component
              data-as="button"
              class="btn"
              onclick="{decrementCounter($state.counter)}"
            >
              -1
            </x-component>
            <x-component
              data-as="button"
              class="btn"
              onclick="{incrementCounter($state.counter)}"
            >
              +1
            </x-component>
          </div>
        </div>
        <x-component
          data-if="{$state.counter > 16}"
          data-foreach="{$state.array}"
        >
          esto solo se renderiza si el counter es mayor a 16
          <x-var name></x-var>
        </x-component>

        <x-for data-foreach="{$state.array}">
          <template>
            <x-var $item.label></x-var>:
            <x-var $item.value.value></x-var>
            <x-component
              onclick="{console.log($state.$item.value)}"
              class="btn"
            >
              log
            </x-component>
          </template>
        </x-for>
      </div>
    </x-state>
    <script>
      function toggleName(name) {
        name.value = name.value === 'John' ? 'Jane' : 'John';
      }

      function incrementCounter(counter) {
        counter.value = counter.value + 1;
      }

      function decrementCounter(counter) {
        counter.value = counter.value - 1;
      }
    </script>
  </body>
</html>
